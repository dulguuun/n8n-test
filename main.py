from transformers import GPT2TokenizerFast

# Load GPT-2 tokenizer which closely approximates OpenAI's token counting
tokenizer = GPT2TokenizerFast.from_pretrained("gpt2")

# Provided prompt string (truncated for example)
user_message = """
You are a senior FE developer. \nPlease review the following code changes in these files :\n\n### Fichier : package-lock.json\n\n```diff\n@@ -8,8 +8,10 @@\n       "name": "n8n-vue-app",\n       "version": "0.0.0",\n       "dependencies": {\n+        "@types/react-router-dom": "^5.3.3",\n         "react": "^19.1.0",\n-        "react-dom": "^19.1.0"\n+        "react-dom": "^19.1.0",\n+        "react-router-dom": "^7.6.3"\n       },\n       "devDependencies": {\n         "@eslint/js": "^9.29.0",\n@@ -1395,6 +1397,12 @@\n       "dev": true,\n       "license": "MIT"\n     },\n+    "node_modules/@types/history": {\n+      "version": "4.7.11",\n+      "resolved": "https://registry.npmjs.org/@types/history/-/history-4.7.11.tgz",\n+      "integrity": "sha512-qjDJRrmvBMiTx+jyLxvLfJU7UznFuokDv4f3WRuriHKERccVpFU+8XMQUAbDzoiJCsmexxRExQeMwwCdamSKDA==",\n+      "license": "MIT"\n+    },\n     "node_modules/@types/json-schema": {\n       "version": "7.0.15",\n       "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",\n@@ -1406,7 +1414,6 @@\n       "version": "19.1.8",\n       "resolved": "https://registry.npmjs.org/@types/react/-/react-19.1.8.tgz",\n       "integrity": "sha512-AwAfQ2Wa5bCx9WP8nZL2uMZWod7J7/JSplxbTmBQ5ms6QpqNYm672H0Vu9ZVKVngQ+ii4R/byguVEUZQyeg44g==",\n-      "dev": true,\n       "license": "MIT",\n       "dependencies": {\n         "csstype": "^3.0.2"\n@@ -1422,6 +1429,27 @@\n         "@types/react": "^19.0.0"\n       }\n     },\n+    "node_modules/@types/react-router": {\n+      "version": "5.1.20",\n+      "resolved": "https://registry.npmjs.org/@types/react-router/-/react-router-5.1.20.tgz",\n+      "integrity": "sha512-jGjmu/ZqS7FjSH6owMcD5qpq19+1RS9DeVRqfl1FeBMxTDQAGwlMWOcs52NDoXaNKyG3d1cYQFMs9rCrb88o9Q==",\n+      "license": "MIT",\n+      "dependencies": {\n+        "@types/history": "^4.7.11",\n+        "@types/react": "*"\n+      }\n+    },\n+    "node_modules/@types/react-router-dom": {\n+      "version": "5.3.3",\n+      "resolved": "https://registry.npmjs.org/@types/react-router-dom/-/react-router-dom-5.3.3.tgz",\n+      "integrity": "sha512-kpqnYK4wcdm5UaWI3fLcELopqLrHgLqNsdpHauzlQktfkHL3npOSwtj1Uz9oKBAzs7lFtVkV8j83voAz2D8fhw==",\n+      "license": "MIT",\n+      "dependencies": {\n+        "@types/history": "^4.7.11",\n+        "@types/react": "*",\n+        "@types/react-router": "*"\n+      }\n+    },\n     "node_modules/@typescript-eslint/eslint-plugin": {\n       "version": "8.35.1",\n       "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.35.1.tgz",\n@@ -1922,6 +1950,15 @@\n       "dev": true,\n       "license": "MIT"\n     },\n+    "node_modules/cookie": {\n+      "version": "1.0.2",\n+      "resolved": "https://registry.npmjs.org/cookie/-/cookie-1.0.2.tgz",\n+      "integrity": "sha512-9Kr/j4O16ISv8zBBhJoi4bXOYNTkFLOqSL3UDB0njXxCXNezjeyVrJyGOWtgfs/q2km1gwBcfH8q1yEGoMYunA==",\n+      "license": "MIT",\n+      "engines": {\n+        "node": ">=18"\n+      }\n+    },\n     "node_modules/cross-spawn": {\n       "version": "7.0.6",\n       "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",\n@@ -1941,7 +1978,6 @@\n       "version": "3.1.3",\n       "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",\n       "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",\n-      "dev": true,\n       "license": "MIT"\n     },\n     "node_modules/debug": {\n@@ -2893,6 +2929,44 @@\n         "node": ">=0.10.0"\n       }\n     },\n+    "node_modules/react-router": {\n+      "version": "7.6.3",\n+      "resolved": "https://registry.npmjs.org/react-router/-/react-router-7.6.3.tgz",\n+      "integrity": "sha512-zf45LZp5skDC6I3jDLXQUu0u26jtuP4lEGbc7BbdyxenBN1vJSTA18czM2D+h5qyMBuMrD+9uB+mU37HIoKGRA==",\n+      "license": "MIT",\n+      "dependencies": {\n+        "cookie": "^1.0.1",\n+        "set-cookie-parser": "^2.6.0"\n+      },\n+      "engines": {\n+        "node": ">=20.0.0"\n+      },\n+      "peerDependencies": {\n+        "react": ">=18",\n+        "react-dom": ">=18"\n+      },\n+      "peerDependenciesMeta": {\n+        "react-dom": {\n+          "optional": true\n+        }\n+      }\n+    },\n+    "node_modules/react-router-dom": {\n+      "version": "7.6.3",\n+      "resolved": "https://registry.npmjs.org/react-router-dom/-/react-router-dom-7.6.3.tgz",\n+      "integrity": "sha512-DiWJm9qdUAmiJrVWaeJdu4TKu13+iB/8IEi0EW/XgaHCjW/vWGrwzup0GVvaMteuZjKnh5bEvJP/K0MDnzawHw==",\n+      "license": "MIT",\n+      "dependencies": {\n+        "react-router": "7.6.3"\n+      },\n+      "engines": {\n+        "node": ">=20.0.0"\n+      },\n+      "peerDependencies": {\n+        "react": ">=18",\n+        "react-dom": ">=18"\n+      }\n+    },\n     "node_modules/resolve-from": {\n       "version": "4.0.0",\n       "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",\n@@ -2994,6 +3068,12 @@\n         "semver": "bin/semver.js"\n       }\n     },\n+    "node_modules/set-cookie-parser": {\n+      "version": "2.7.1",\n+      "resolved": "https://registry.npmjs.org/set-cookie-parser/-/set-cookie-parser-2.7.1.tgz",\n+      "integrity": "sha512-IOc8uWeOZgnb3ptbCURJWNjWUPcO3ZnTTdzsurqERrP6nPyv+paC55vJM0LpOlT2ne+Ix+9+CRG1MNLlyZ4GjQ==",\n+      "license": "MIT"\n+    },\n     "node_modules/shebang-command": {\n       "version": "2.0.0",\n       "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",\n```\n\n---\n\n### Fichier : package.json\n\n```diff\n@@ -10,8 +10,10 @@\n     "preview": "vite preview"\n   },\n   "dependencies": {\n+    "@types/react-router-dom": "^5.3.3",\n     "react": "^19.1.0",\n-    "react-dom": "^19.1.0"\n+    "react-dom": "^19.1.0",\n+    "react-router-dom": "^7.6.3"\n   },\n   "devDependencies": {\n     "@eslint/js": "^9.29.0",\n```\n\n---\n\n### Fichier : src/App.tsx\n\n```diff\n@@ -1,35 +1,32 @@\n-import { useState } from 'react'\n-import reactLogo from './assets/react.svg'\n-import viteLogo from '/vite.svg'\n-import './App.css'\n+import React from "react";\n+import {\n+  BrowserRouter as Router,\n+  Routes,\n+  Route,\n+  Navigate,\n+} from "react-router-dom";\n+import LoginPage from "./pages/LoginPage";\n+import DashboardPage from "./pages/DashboardPage";\n+import ProfilePage from "./pages/ProfilePage";\n+import ContactPage from "./pages/ContactPage";\n+import HelpPage from "./pages/HelpPage";\n+import ServicesPage from "./pages/ServicesPage";\n+import ProductPage from "./pages/ProductPage";\n \n-function App() {\n-  const [count, setCount] = useState(0)\n+const App: React.FC = () => (\n+  <Router>\n+    <Routes>\n+      <Route path="/" element={<Navigate to="/login" />} />\n+      <Route path="/login" element={<LoginPage />} />\n+      <Route path="/dashboard" element={<DashboardPage />} />\n+      {/* <Route path="/logout" element={<LogoutPage />} /> */}\n+      <Route path="/profile" element={<ProfilePage />} />\n+      <Route path="/contact" element={<ContactPage />} />\n+      <Route path="/help" element={<HelpPage />} />\n+      <Route path="/services" element={<ServicesPage />} />\n+      <Route path="/product" element={<ProductPage />} />\n+    </Routes>\n+  </Router>\n+);\n \n-  return (\n-    <>\n-      <div>\n-        <a href="https://vite.dev" target="_blank">\n-          <img src={viteLogo} className="logo" alt="Vite logo" />\n-        </a>\n-        <a href="https://react.dev" target="_blank">\n-          <img src={reactLogo} className="logo react" alt="React logo" />\n-        </a>\n-      </div>\n-      <h1>Vite + React</h1>\n-      <div className="card">\n-        <button onClick={() => setCount((count) => count + 1)}>\n-          count is {count}\n-        </button>\n-        <p>\n-          Edit <code>src/App.tsx</code> and save to test HMR\n-        </p>\n-      </div>\n-      <p className="read-the-docs">\n-        Click on the Vite and React logos to learn more\n-      </p>\n-    </>\n-  )\n-}\n-\n-export default App\n+export default App;\n```\n\n---\n\n### Fichier : src/index.css\n\n```diff\n@@ -23,9 +23,10 @@ a:hover {\n }\n \n body {\n-  margin: 0;\n+  margin: 0 auto;\n   display: flex;\n-  place-items: center;\n+  justify-content: center;\n+  align-items: center;\n   min-width: 320px;\n   min-height: 100vh;\n }\n```\n\n---\n\n### Fichier : src/pages/ContactPage.tsx\n\n```diff\n@@ -0,0 +1,13 @@\n+import React from "react";\n+\n+const ContactPage: React.FC = () => (\n+  <div style={{ padding: 32 }}>\n+    <h1>Contact Page</h1>\n+    <p>Contact us at contact@example.com.</p>\n+    <button onClick={() => window.history.back()} style={{ marginBottom: 16 }}>\n+      Back\n+    </button>\n+  </div>\n+);\n+\n+export default ContactPage;\n```\n\n---\n\n### Fichier : src/pages/DashboardPage.tsx\n\n```diff\n@@ -0,0 +1,81 @@\n+import React from "react";\n+import { Link, useNavigate } from "react-router-dom";\n+\n+const DashboardPage: React.FC = () => {\n+  const navigate = useNavigate();\n+\n+  const handleLogout = () => {\n+    navigate("/login", { replace: true });\n+  };\n+\n+  return (\n+    <div style={{ padding: 32 }}>\n+      <h1>Welcome to the Dashboard!</h1>\n+      <p>You are now logged in.</p>\n+      <div style={{ margin: "24px 0" }}>\n+        <Link\n+          to="/profile"\n+          style={{\n+            marginRight: 16,\n+            color: "#42b983",\n+            textDecoration: "underline",\n+          }}\n+        >\n+          Profile\n+        </Link>\n+        <Link\n+          to="/contact"\n+          style={{\n+            marginRight: 16,\n+            color: "#42b983",\n+            textDecoration: "underline",\n+          }}\n+        >\n+          Contact\n+        </Link>\n+        <Link\n+          to="/help"\n+          style={{\n+            marginRight: 16,\n+            color: "#42b983",\n+            textDecoration: "underline",\n+          }}\n+        >\n+          Help\n+        </Link>\n+        <Link\n+          to="/services"\n+          style={{\n+            marginRight: 16,\n+            color: "#42b983",\n+            textDecoration: "underline",\n+          }}\n+        >\n+          Services\n+        </Link>\n+        <Link\n+          to="/product"\n+          style={{ color: "#42b983", textDecoration: "underline" }}\n+        >\n+          Product\n+        </Link>\n+      </div>\n+      <button\n+        onClick={handleLogout}\n+        style={{\n+          marginTop: 24,\n+          padding: "10px 24px",\n+          background: "#e74c3c",\n+          color: "#fff",\n+          border: "none",\n+          borderRadius: 4,\n+          cursor: "pointer",\n+        }}\n+      >\n+        Logout\n+      </button>\n+    </div>\n+  );\n+};\n+\n+export default DashboardPage;\n```\n\n---\n\n### Fichier : src/pages/HelpPage.tsx\n\n```diff\n@@ -0,0 +1,13 @@\n+import React from "react";\n+\n+const HelpPage: React.FC = () => (\n+  <div style={{ padding: 32 }}>\n+    <h1>Help Page</h1>\n+    <p>How can we assist you?</p>\n+    <button onClick={() => window.history.back()} style={{ marginBottom: 16 }}>\n+      Back\n+    </button>\n+  </div>\n+);\n+\n+export default HelpPage;\n```\n\n---\n\n### Fichier : src/pages/LoginPage.tsx\n\n```diff\n@@ -0,0 +1,73 @@\n+import React, { useState } from "react";\n+import { useNavigate } from "react-router-dom";\n+\n+const MOCK_USER = { username: "admin", password: "admin" };\n+\n+const LoginPage: React.FC = () => {\n+  const [username, setUsername] = useState("");\n+  const [password, setPassword] = useState("");\n+  const [error, setError] = useState("");\n+  const navigate = useNavigate();\n+\n+  const handleSubmit = (e: React.FormEvent) => {\n+    e.preventDefault();\n+    if (username === MOCK_USER.username && password === MOCK_USER.password) {\n+      navigate("/dashboard");\n+    } else {\n+      setError("Invalid username or password");\n+    }\n+  };\n+\n+  return (\n+    <div\n+      style={{\n+        margin: "100px auto",\n+        padding: 24,\n+        border: "1px solid #eee",\n+        borderRadius: 8,\n+      }}\n+    >\n+      <h2>Login</h2>\n+      <form onSubmit={handleSubmit}>\n+        <div>\n+          <label htmlFor="username">Username</label>\n+          <input\n+            id="username"\n+            type="text"\n+            value={username}\n+            onChange={(e) => setUsername(e.target.value)}\n+            required\n+            style={{ width: "91%", marginBottom: 12, padding: 8 }}\n+          />\n+        </div>\n+        <div>\n+          <label htmlFor="password">Password</label>\n+          <input\n+            id="password"\n+            type="password"\n+            value={password}\n+            onChange={(e) => setPassword(e.target.value)}\n+            required\n+            style={{ width: "91%", marginBottom: 12, padding: 8 }}\n+          />\n+        </div>\n+        <button\n+          type="submit"\n+          style={{\n+            width: "100%",\n+            padding: 10,\n+            background: "#42b983",\n+            color: "#fff",\n+            border: "none",\n+            borderRadius: 4,\n+          }}\n+        >\n+          Login\n+        </button>\n+        {error && <p style={{ color: "#e74c3c", marginTop: 16 }}>{error}</p>}\n+      </form>\n+    </div>\n+  );\n+};\n+\n+export default LoginPage;\n```\n\n---\n\n### Fichier : src/pages/ProductPage.tsx\n\n```diff\n@@ -0,0 +1,13 @@\n+import React from "react";\n+\n+const ProductPage: React.FC = () => (\n+  <div style={{ padding: 32 }}>\n+    <h1>Product Page</h1>\n+    <p>Check out our products.</p>\n+    <button onClick={() => window.history.back()} style={{ marginBottom: 16 }}>\n+      Back\n+    </button>\n+  </div>\n+);\n+\n+export default ProductPage;\n```\n\n---\n\n### Fichier : src/pages/ProfilePage.tsx\n\n```diff\n@@ -0,0 +1,13 @@\n+import React from "react";\n+\n+const ProfilePage: React.FC = () => (\n+  <div style={{ padding: 32 }}>\n+    <h1>Profile Page</h1>\n+    <p>This is your profile.</p>\n+    <button onClick={() => window.history.back()} style={{ marginBottom: 16 }}>\n+      Back\n+    </button>\n+  </div>\n+);\n+\n+export default ProfilePage;\n```\n\n---\n\n### Fichier : src/pages/ServicesPage.tsx\n\n```diff\n@@ -0,0 +1,13 @@\n+import React from "react";\n+\n+const ServicesPage: React.FC = () => (\n+  <div style={{ padding: 32 }}>\n+    <h1>Services Page</h1>\n+    <p>These are our services.</p>\n+    <button onClick={() => window.history.back()} style={{ marginBottom: 16 }}>\n+      Back\n+    </button>\n+  </div>\n+);\n+\n+export default ServicesPage;\n```\n\n---\n\n\n\n---\n\nYour mission:\n\n- Review the proposed code changes file by file and by significant modification.\n\n- Generate inline comments on the relevant lines of code.\n\n- Ignore files without patches.\n\n- Do not repeat the code snippet or the filename.\n\n- Write the comments directly, without introducing the context.
"""

# Count tokens
token_count = len(tokenizer.encode(user_message))

print(f"Token count: {token_count}")
